<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ù…Ù†ØµØ© Ø§Ù„ØªÙ…Ø³Ø§Ø­ÙŠØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</title>
    <meta name="application-name" content="Ù…Ù†ØµØ© Ø§Ù„ØªÙ…Ø³Ø§Ø­ÙŠØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©">
    <meta name="description" content="Ù…Ù†ØµØ© Ø§Ù„ØªÙ…Ø³Ø§Ø­ÙŠØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªÙ‚Ø¯Ù… Ù…Ø­ØªÙˆÙ‰ ØªØ¹Ù„ÙŠÙ…ÙŠ Ø¹Ø±Ø¨ÙŠ Ù…Ø¨Ø³Ø· Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø§Ù„Ù…ØµØ±ÙŠØ©">

    <!-- Open Graph -->
    <meta property="og:title" content="Ù…Ù†ØµØ© Ø§Ù„ØªÙ…Ø³Ø§Ø­ÙŠØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©">
    <meta property="og:description" content="Ù…Ù†ØµØ© Ø¹Ø±Ø¨ÙŠØ© Ù…ØªØ®ØµØµØ© ÙÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø§Ù„Ù…ØµØ±ÙŠØ©">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://elkhatib-ai.github.io/Al-Tamsahya-Online-Education/">
    <meta property="og:image" content="https://elkhatib-ai.github.io/Al-Tamsahya-Online-Education/icon-192.png">

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e40af">

    <!-- Icons -->
    <link rel="icon" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" type="image/x-icon" href="/Al-Tamsahya-Online-Education/favicon.ico">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E4BFPGRT2R"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-E4BFPGRT2R');
    </script>
</head>
<body>
<div class="app-container">
    <nav class="top-nav">
        <div class="nav-title">Ù…Ù†ØµØ© Ø§Ù„ØªÙ…Ø³Ø§Ø­ÙŠØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</div>
        <div id="navUser" class="nav-user"></div>
        <button onclick="toggleDarkMode()" class="dark-btn">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>
    </nav>
</div>

<div id="studentAnnouncement" style="display:none; background:#fff3cd; padding:15px; margin:15px; border-radius:8px;"></div>

<!-- ğŸ§‘â€ğŸ“ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ -->
<section class="welcome-message" id="welcomeMessage">
    <h2>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ… ÙÙŠ Ù…Ù†ØµØ© Ø§Ù„ØªÙ…Ø³Ø§Ø­ÙŠØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ğŸ“</h2>
    <p>Ù†Ø±Ø­Ø¨ Ø¨Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© ÙÙŠ Ù…Ù†ØµØªÙ†Ø§ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©ØŒ ÙˆØ§Ù„ØªÙŠ ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ ØªÙ‚Ø¯ÙŠÙ… Ù…Ø­ØªÙˆÙ‰ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù…Ø¨Ø³Ø· ÙˆÙ…Ù†Ø¸Ù… ÙˆÙÙ‚Ù‹Ø§ Ù„Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„Ù…ØµØ±ÙŠ.</p>
    <p>ØªØªÙŠØ­ Ø§Ù„Ù…Ù†ØµØ© Ø¯Ø±ÙˆØ³Ù‹Ø§ ØªÙØ§Ø¹Ù„ÙŠØ©ØŒ Ø´Ø±ÙˆØ­Ø§Øª Ù…Ø±Ø¦ÙŠØ©ØŒ ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ù…Ø³ØªÙ…Ø±Ø© Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ.</p>
    <p><strong>Ù†ØªÙ…Ù†Ù‰ Ù„ÙƒÙ… ØªØ¬Ø±Ø¨Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù†Ø§Ø¬Ø­Ø© ÙˆÙ…Ø«Ù…Ø±Ø© ğŸŒŸ</strong></p>
</section>

<!-- ğŸ”” Ø¥Ø¹Ù„Ø§Ù† Ù…ØªØ­Ø±Ùƒ -->
<div id="promoAd" class="promo-ad hidden">
    <div class="promo-content">
        <div id="promoText"></div>
        <br>
        <button onclick="closeAd()">âœ– Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<!-- Ø´Ø±ÙŠØ· ØªÙ†Ù‚Ù„ Ø¹Ø§Ù… -->
<div id="globalNav" class="nav-btns hidden">
    <button id="backBtn" onclick="smartBack()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
    <button id="homeBtn" onclick="goHome()">ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

<!-- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="loginPage" class="login-container">
    <h1>Ù…Ù†ØµØ© Ø§Ù„ØªÙ…Ø³Ø§Ø­ÙŠØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h1>
    <p style="color:white">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© â€“ Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„Ù…ØµØ±ÙŠ</p>
    <input id="email" type="text" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <div class="auth-buttons">
        <button id="loginBtn" onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        <button type="button" class="register-btn secondary" onclick="registerStudentPage(); return false;">ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
    </div>
</div>
<!-- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ -->
<div id="registerPage" class="login-container hidden">
    <h2>ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
    <input id="regName" type="text" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
    <input id="regEmail" type="text" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input id="regPassword" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <div class="auth-buttons">
        <button onclick="registerStudent()">ØªØ³Ø¬ÙŠÙ„</button>
        <button type="button" onclick="showLoginPage()">Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
<div id="adminPage" class="admin-container hidden">
    <h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h1>
    <div class="admin-actions">
        <button onclick="showStudentList()">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</button>
        <button onclick="sendAnnouncement()">Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ø·Ù„Ø§Ø¨</button>
        <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
    <div id="adminContent"></div>
</div>

<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="homePage" class="home-container hidden">
    <h2 id="welcomeUser">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ!</h2>
    <div class="course-cards">
        <div class="card" onclick="openLesson('math')">
            <h3>Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</h3>
            <p>Ø¯Ø±ÙˆØ³ ÙˆØ£Ù…Ø«Ù„Ø© ÙˆØªÙ…Ø§Ø±ÙŠÙ† Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ©</p>
        </div>
        <div class="card" onclick="openLesson('science')">
            <h3>Ø§Ù„Ø¹Ù„ÙˆÙ…</h3>
            <p>Ø´Ø±Ø­ Ù…ÙØµÙ„ Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</p>
        </div>
        <div class="card" onclick="openLesson('arabic')">
            <h3>Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</h3>
            <p>Ø¯Ø±ÙˆØ³ Ø§Ù„Ù†Ø­Ùˆ ÙˆØ§Ù„Ø¥Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ø¨Ù„Ø§ØºØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø³Ø·Ø©</p>
        </div>
        <div class="card" onclick="openLesson('english')">
            <h3>Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</h3>
            <p>ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆÙ…Ø¨Ø³Ø·Ø©</p>
        </div>
    </div>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ù…ÙØµÙ„ -->
<div id="lessonPage" class="lesson-container hidden">
    <button onclick="goHome()">â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <h2 id="lessonTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³</h2>
    <div id="lessonContent">
        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø³ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
    </div>
</div>

<!-- Ø´Ø±ÙŠØ· Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‚Ø¯Ù… -->
<div id="progressBar" class="progress-bar hidden">
    <div class="progress-fill" id="progressFill"></div>
</div>
<!-- ========================= -->
<!-- Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª Ø§Ù„ÙˆØ¸Ø§Ø¦Ù -->
<!-- ========================= -->
<script>
let currentUser = null;
let currentLessonIndex = 0;
let currentLessons = [];
let lessonCompleted = false;

// =====================
// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
// =====================
async function login() {
    const email = document.getElementById("email").value.trim().toLowerCase();
    const password = document.getElementById("password").value.trim();
    if(!email || !password){ alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±!"); return; }

    const db = firebase.firestore();
    try {
        // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø£Ø¯Ù…Ù†
        const adminDoc = await db.collection("admins").doc("admin").get();
        if(adminDoc.exists){
            const adminData = adminDoc.data();
            if(adminData.email === email && adminData.password === password){
                currentUser = { email, role: "ADMIN" };
                showAdminPage();
                return;
            }
        }

        // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø·Ø§Ù„Ø¨
        const studentSnap = await db.collection("students").where("email","==",email).get();
        if(!studentSnap.empty){
            const student = studentSnap.docs[0].data();
            if(student.password !== password){ alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø© âŒ"); return; }
            if(!student.approved){ alert("Ø­Ø³Ø§Ø¨Ùƒ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"); return; }
            currentUser = { ...student, role:"STUDENT" };
            showHomePage();
            return;
        }

        alert("Ø§Ù„Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ âŒ");

    } catch(err){ console.error(err); alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ âŒ"); }
}

// =====================
// ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
// =====================
async function registerStudent() {
    const email = document.getElementById("regEmail").value.trim().toLowerCase();
    const password = document.getElementById("regPassword").value.trim();
    if(!email || !password){ alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"); return; }

    const db = firebase.firestore();
    try {
        const snap = await db.collection("students").where("email","==",email).get();
        if(!snap.empty){ alert("Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„ âŒ"); return; }

        await db.collection("students").add({
            email, password, role:"STUDENT", approved:false, createdAt: new Date().toISOString()
        });
        alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ… ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©");
        showLoginPage();
    } catch(err){ console.error(err); alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ âŒ"); }
}

// =====================
// Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø§Øª
// =====================
function showLoginPage(){ 
    document.getElementById("loginPage").classList.remove("hidden");
    document.getElementById("registerPage").classList.add("hidden");
    document.getElementById("homePage").classList.add("hidden");
    document.getElementById("adminPage").classList.add("hidden");
}

function showHomePage(){
    document.getElementById("homePage").classList.remove("hidden");
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("registerPage").classList.add("hidden");
    document.getElementById("adminPage").classList.add("hidden");
    document.getElementById("welcomeUser").textContent = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ${currentUser.email}`;
}

function showAdminPage(){
    document.getElementById("adminPage").classList.remove("hidden");
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("registerPage").classList.add("hidden");
    document.getElementById("homePage").classList.add("hidden");
}

// =====================
// ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
// =====================
function logout(){
    currentUser = null;
    stopVideo();
    showLoginPage();
}

// =====================
// ÙØªØ­ Ø§Ù„Ø¯Ø±Ø³
// =====================
function openLesson(subject){
    const lessonsData = {
        math:[
            {title:"Ø¯Ø±Ø³ 1 Ø¬Ø¨Ø±", content:"Ø´Ø±Ø­ Ø¯Ø±Ø³ Ø§Ù„Ø¬Ø¨Ø± Ø§Ù„Ø£ÙˆÙ„", video:"videos/math/lesson1.mp4"},
            {title:"Ø¯Ø±Ø³ 2 Ø¬Ø¨Ø±", content:"Ø´Ø±Ø­ Ø¯Ø±Ø³ Ø§Ù„Ø¬Ø¨Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ", video:"videos/math/lesson2.mp4"}
        ],
        science:[
            {title:"Ø¯Ø±Ø³ 1 Ø¹Ù„ÙˆÙ…", content:"Ø´Ø±Ø­ Ø¯Ø±Ø³ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£ÙˆÙ„", video:"videos/science/lesson1.mp4"},
            {title:"Ø¯Ø±Ø³ 2 Ø¹Ù„ÙˆÙ…", content:"Ø´Ø±Ø­ Ø¯Ø±Ø³ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ", video:"videos/science/lesson2.mp4"}
        ]
    };
    currentLessons = lessonsData[subject] || [];
    currentLessonIndex = 0;
    loadLesson(currentLessonIndex);
}

// =====================
// ØªØ­Ù…ÙŠÙ„ Ø¯Ø±Ø³
// =====================
function loadLesson(index){
    if(!currentLessons[index]) return;
    const lesson = currentLessons[index];
    document.getElementById("lessonPage").classList.remove("hidden");
    document.getElementById("homePage").classList.add("hidden");
    document.getElementById("lessonTitle").textContent = lesson.title;

    const contentDiv = document.getElementById("lessonContent");
    contentDiv.innerHTML = `<p>${lesson.content}</p>
        <video id="lessonVideo" controls width="100%" style="max-height:250px;border-radius:12px;">
            <source src="${lesson.video}" type="video/mp4">Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
        </video>`;

    const video = document.getElementById("lessonVideo");
    video.addEventListener("ended", ()=>{ lessonCompleted=true; });

    // Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
    const progress = ((index+1)/currentLessons.length)*100;
    document.getElementById("progressBar").classList.remove("hidden");
    document.getElementById("progressFill").style.width = progress+"%";
}

// =====================
// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¯Ø±ÙˆØ³
// =====================
function nextLesson(){
    if(!lessonCompleted){ alert("ÙŠØ¬Ø¨ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙƒØ§Ù…Ù„Ù‹Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ"); return; }
    if(currentLessonIndex < currentLessons.length-1){
        currentLessonIndex++;
        lessonCompleted=false;
        loadLesson(currentLessonIndex);
    } else { alert("ğŸ‰ Ø§Ù†ØªÙ‡ÙŠØª Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±ÙˆØ³!"); }
}

function prevLesson(){
    if(currentLessonIndex>0){
        currentLessonIndex--;
        lessonCompleted=false;
        loadLesson(currentLessonIndex);
    }
}

// =====================
// Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
// =====================
function stopVideo(){
    const video = document.getElementById("lessonVideo");
    if(video){ video.pause(); video.currentTime=0; video.src=""; }
}

// =====================
// Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
// =====================
function toggleDarkMode(){
    document.body.classList.toggle("dark-mode");
    localStorage.setItem("darkMode", document.body.classList.contains("dark-mode"));
}
if(localStorage.getItem("darkMode")==="true"){ document.body.classList.add("dark-mode"); }

// =====================
// Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
// =====================
function showAnnouncement(text){
    const bar = document.getElementById("announcementBar");
    const textBox = document.getElementById("announcementText");
    if(!bar || !textBox) return;
    textBox.innerText = "ğŸ“¢ "+text+" ğŸ“¢";
    bar.style.display="flex";
    const width = bar.offsetWidth + textBox.offsetWidth;
    textBox.style.transition="left 12s linear";
    textBox.style.left = width+"px";
    setTimeout(()=>{ textBox.style.left="-"+textBox.offsetWidth+"px"; },50);
}

function hideAnnouncementBar(){
    const bar = document.getElementById("announcementBar");
    if(bar) bar.style.display="none";
}
</script>

<!-- ========================= -->
<!-- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¬Ø³Ù… ÙˆØ§Ù„ØµÙØ­Ø© -->
<!-- ========================= -->
</body>
</html>
